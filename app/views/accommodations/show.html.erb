<%= stylesheet_link_tag "show_page", "data-turbo-track": "reload" %>
<body style = "background-image: url(<%= @accommodation.trip.image_url%>)" class = 'background-image'>
<%= link_to '←', trip_accommodations_path(@trip), class: 'btn back' %>
<div class = 'container text-center'>
  <div class="row">
    <div class="card-title"><h4 ><%= @accommodation.name %></h4></div>
    <p class="card-subtitle"><%= @accommodation.address %></p>
    <div class="card-text mb-2 text-muted"><h5>Check In</h5></div>
    <p class="card-text"><%= @accommodation.check_in_date.strftime("%B, %d, %Y")%> at <%= @accommodation.check_in_time.strftime("%k:%M %p")%> </p>
    <div class="card-text mb-2 text-muted"><h5>Check Out</h5></div>
    <p class="card-text"><%= @accommodation.check_out_date.strftime("%B, %d, %Y")%> at <%= @accommodation.check_out_time.strftime("%k:%M %p")%> </p>
    <% if @accommodation.phone.length > 0 || @accommodation.email.length > 0 %>
    <div class="card-text mb-2 text-muted"><h5>Contact Information</h5></div>
    <% end %>
    <% if @accommodation.phone.length > 0 %>
     <p class="card-text">  Phone: <%= @accommodation.phone%></p><% end %>
     <% if @accommodation.email.length > 0%>
     <p class="card-text"> Email: <%= @accommodation.email%></p>
    <%end%>
    <% if @accommodation.note.length > 0 %>
    <div class="card-text mb-2 text-muted"><h5>Notes</h5></div>
    <p class="card-subtitle"><%= @accommodation.note %></p>
    <%end%>
    
    
   <div >
      <%= link_to 'Manage Accommodation', edit_trip_accommodation_path(@trip, @accommodation), class:"btn btn-dark" %> 
   </div> 
 </div>

 <% if @accommodation.latitude && @accommodation.longitude%>
 <div class = 'row map' >
 <div id = 'map' style = 'width: 800px; height: 400px;'></div>


<script>
//This is to create the map and copied from: https://github.com/apneadiving/Google-Maps-for-Rails
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
        {
        "lat": <%= @accommodation.latitude %>, 
        "lng": <%= @accommodation.longitude %>,  
        "picture": {
            "width":  32,
            "height": 32
        },
        "infowindow": "<%= @accommodation.address %>'s location."
        }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(17); //we are adding this to zoom in a bit
});
</script>

</div>

<% end %>

</div>